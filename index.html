<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management System</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-users"></i> User Management System</h1>
            <p>Manage users with full CRUD operations</p>
        </header>

        <main class="main-content">
            <!-- Controls Section -->
            <div class="controls-section">
                <div class="search-filter-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search users...">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <button id="filterBtn" class="btn btn-secondary">
                        <i class="fas fa-filter"></i> Filter
                    </button>
                    
                    <button id="addUserBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>

                <div class="sort-pagination-container">
                    <div class="sort-controls">
                        <label for="sortBy">Sort by:</label>
                        <select id="sortBy">
                            <option value="id">ID</option>
                            <option value="name">Name</option>
                            <option value="email">Email</option>
                            <option value="username">Username</option>
                        </select>
                        <button id="sortOrder" class="btn btn-small">
                            <i class="fas fa-sort-amount-down"></i>
                        </button>
                    </div>

                    <div class="pagination-controls">
                        <label for="itemsPerPage">Items per page:</label>
                        <select id="itemsPerPage">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading-indicator">
                <i class="fas fa-spinner fa-spin"></i>
                <span>Loading users...</span>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="error-message" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText"></span>
                <button id="retryBtn" class="btn btn-small">Retry</button>
            </div>

            <!-- Users Table -->
            <div class="table-container">
                <table id="usersTable" class="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Department</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Users will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination-container">
                <div class="pagination-info">
                    <span id="paginationInfo">Showing 0-0 of 0 users</span>
                </div>
                <div class="pagination-buttons">
                    <button id="prevBtn" class="btn btn-small" disabled>
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <div id="pageNumbers" class="page-numbers">
                        <!-- Page numbers will be inserted here -->
                    </div>
                    <button id="nextBtn" class="btn btn-small" disabled>
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Filter Modal -->
    <div id="filterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-filter"></i> Filter Users</h3>
                <span class="close" id="closeFilterModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="filterFirstName">First Name:</label>
                    <input type="text" id="filterFirstName" placeholder="Enter first name">
                </div>
                <div class="form-group">
                    <label for="filterLastName">Last Name:</label>
                    <input type="text" id="filterLastName" placeholder="Enter last name">
                </div>
                <div class="form-group">
                    <label for="filterEmail">Email:</label>
                    <input type="email" id="filterEmail" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label for="filterDepartment">Department:</label>
                    <input type="text" id="filterDepartment" placeholder="Enter department">
                </div>
            </div>
            <div class="modal-footer">
                <button id="clearFiltersBtn" class="btn btn-secondary">Clear Filters</button>
                <button id="applyFiltersBtn" class="btn btn-primary">Apply Filters</button>
            </div>
        </div>
    </div>

    <!-- User Form Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle"><i class="fas fa-user-plus"></i> Add New User</h3>
                <span class="close" id="closeUserModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required>
                            <span class="error-text" id="firstNameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required>
                            <span class="error-text" id="lastNameError"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="username">Username *</label>
                        <input type="text" id="username" name="username" required>
                        <span class="error-text" id="usernameError"></span>
                    </div>
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" required>
                        <span class="error-text" id="emailError"></span>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input type="tel" id="phone" name="phone">
                        <span class="error-text" id="phoneError"></span>
                    </div>
                    <div class="form-group">
                        <label for="website">Website</label>
                        <input type="url" id="website" name="website">
                        <span class="error-text" id="websiteError"></span>
                    </div>
                    <div class="form-group">
                        <label for="department">Department</label>
                        <input type="text" id="department" name="department" placeholder="e.g., IT, HR, Finance">
                        <span class="error-text" id="departmentError"></span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
                <button type="submit" id="saveBtn" class="btn btn-primary" form="userForm">
                    <i class="fas fa-save"></i> Save User
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3><i class="fas fa-trash-alt"></i> Confirm Delete</h3>
                <span class="close" id="closeDeleteModal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this user?</p>
                <p><strong id="deleteUserName"></strong></p>
                <p class="warning-text">This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button id="cancelDeleteBtn" class="btn btn-secondary">Cancel</button>
                <button id="confirmDeleteBtn" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> Delete User
                </button>
            </div>
        </div>
    </div>

    <!-- Success Message -->
    <div id="successMessage" class="success-message">
        <i class="fas fa-check-circle"></i>
        <span id="successText"></span>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/userService.js"></script>
    <script src="js/pagination.js"></script>
    <script src="js/filtering.js"></script>
    <script src="js/app.js"></script>
</body>
</html>